var sowb=window.sowb||{};jQuery(function(o){sowb.setupAccordion=function(){o(".sow-accordion").each(function(n,a){var i=o(this).closest(".so-widget-sow-accordion"),e=i.data("useAnchorTags"),c=i.data("initialScrollPanel"),s=o(a).find("> .sow-accordion-panel");s.not(".sow-accordion-panel-open").find(".sow-accordion-panel-content").hide();var t=s.filter(".sow-accordion-panel-open").toArray(),r=function(){},d=function(n,a){var i=o(n);i.is(".sow-accordion-panel-open")||(i.find("> .sow-accordion-panel-content").slideDown(function(){o(this).trigger("show")}),i.addClass("sow-accordion-panel-open"),t.push(n),a||r())},w=function(n,a){var i=o(n);i.is(".sow-accordion-panel-open")&&(i.find("> .sow-accordion-panel-content").slideUp(function(){o(this).trigger("hide")}),i.removeClass("sow-accordion-panel-open"),t.splice(t.indexOf(n),1),a||r())};if(s.find("> .sow-accordion-panel-header").click(function(){var n=o(this),a=i.data("maxOpenPanels"),e=n.closest(".sow-accordion-panel");e.is(".sow-accordion-panel-open")?w(e.get(0)):d(e.get(0)),!isNaN(a)&&a>0&&t.length>a&&w(t[0])}),e){r=function(){for(var n=[],a=0;a<t.length;a++){var i=o(t[a]).data("anchor");i&&(n[a]=i)}n&&n.length?window.location.hash=n.join(","):window.history.pushState("",document.title,window.location.pathname+window.location.search)};var l=function(){for(var n=s.toArray(),a=0;a<n.length;a++){panel=n[a];var i=o(panel).data("anchor");i&&window.location.hash.indexOf(i)>-1?d(panel,!0):w(panel,!0)}};if(o(window).on("hashchange",l),window.location.hash?l():r(),c>0){var p=c>s.length?s.last():s.eq(c-1);window.scrollTo(0,p.offset().top-90)}}})},sowb.setupAccordion(),o(sowb).on("setup_widgets",sowb.setupAccordion)}),window.sowb=sowb;